<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de ventas</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.postimg.cc/kXdCrCc1/LOGO-MANA-SAKILLA-5.png">
    
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <iframe id="main-iframe" src=""></iframe>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // URL base del iframe gestor
            const baseUrl = "https://script.google.com/macros/s/AKfycbxJEy79-nnmipRkZ-WxneQ90xrgf5XszEM_XiqJ_mMzAo9-HzVAHWyOp7nSwLwYk6Od/exec";
            // URL para dispositivos móviles
            const mobileUrl = "https://pos.manasakilla.com/movil";
            
            // Función más robusta para detectar si es dispositivo móvil
            function isMobileDevice() {
                // Verificar por User-Agent primero (más confiable)
                const mobileRegex = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i;
                if (mobileRegex.test(navigator.userAgent)) {
                    console.log("Detectado móvil por User-Agent");
                    return true;
                }
                
                // También verificar por dimensiones de pantalla (pantallas pequeñas)
                const smallScreen = window.innerWidth <= 768;
                if (smallScreen) {
                    console.log("Detectado móvil por dimensiones de pantalla");
                    return true;
                }
                
                // Verificar si está en modo de simulación móvil (para depuración)
                if (window.navigator.userAgent.indexOf("Mobile") !== -1 || 
                    window.navigator.userAgent.indexOf("Android") !== -1) {
                    console.log("Detectado móvil por simulación");
                    return true;
                }
                
                return false;
            }
            
            // Determinar URL final basado en el tipo de dispositivo
            const isMobile = isMobileDevice();
            
            if (isMobile) {
                // Redirigir a la URL móvil en lugar de usar el iframe
                window.location.href = mobileUrl;
            } else {
                // Cargar el iframe solo en dispositivos de escritorio
                document.getElementById('main-iframe').src = baseUrl;
            }
            
            // Redetectar en caso de cambio de tamaño de ventana (útil para tablets y dispositivos que cambian orientación)
            window.addEventListener('resize', function() {
                const currentIsMobile = isMobileDevice();
                if (currentIsMobile !== isMobile) {
                    // Solo actualizar si cambió el estado (de móvil a escritorio o viceversa)
                    if (currentIsMobile) {
                        window.location.href = mobileUrl;
                    } else {
                        // Solo recargar si cambió de móvil a escritorio
                        if (window.location.href !== document.location.href) {
                            window.location.reload();
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
